const i=Symbol.for("drizzle:entityKind");function S(r,e){if(!r||typeof r!="object")return!1;if(r instanceof e)return!0;if(!Object.prototype.hasOwnProperty.call(e,i))throw new Error(`Class "${e.name??"<unknown>"}" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug.`);let t=Object.getPrototypeOf(r).constructor;if(t)for(;t;){if(i in t&&t[i]===e[i])return!0;t=Object.getPrototypeOf(t)}return!1}class E{constructor(e,t){this.table=e,this.config=t,this.name=t.name,this.keyAsName=t.keyAsName,this.notNull=t.notNull,this.default=t.default,this.defaultFn=t.defaultFn,this.onUpdateFn=t.onUpdateFn,this.hasDefault=t.hasDefault,this.primary=t.primaryKey,this.isUnique=t.isUnique,this.uniqueName=t.uniqueName,this.uniqueType=t.uniqueType,this.dataType=t.dataType,this.columnType=t.columnType,this.generated=t.generated,this.generatedIdentity=t.generatedIdentity}static[i]="Column";name;keyAsName;primary;notNull;default;defaultFn;onUpdateFn;hasDefault;isUnique;uniqueName;uniqueType;dataType;columnType;enumValues=void 0;generated=void 0;generatedIdentity=void 0;config;mapFromDriverValue(e){return e}mapToDriverValue(e){return e}shouldDisableInsert(){return this.config.generated!==void 0&&this.config.generated.type!=="byDefault"}}class ae{static[i]="ColumnBuilder";config;constructor(e,t,n){this.config={name:e,keyAsName:e==="",notNull:!1,default:void 0,hasDefault:!1,primaryKey:!1,isUnique:!1,uniqueName:void 0,uniqueType:void 0,dataType:t,columnType:n,generated:void 0}}$type(){return this}notNull(){return this.config.notNull=!0,this}default(e){return this.config.default=e,this.config.hasDefault=!0,this}$defaultFn(e){return this.config.defaultFn=e,this.config.hasDefault=!0,this}$default=this.$defaultFn;$onUpdateFn(e){return this.config.onUpdateFn=e,this.config.hasDefault=!0,this}$onUpdate=this.$onUpdateFn;primaryKey(){return this.config.primaryKey=!0,this.config.notNull=!0,this}setName(e){this.config.name===""&&(this.config.name=e)}}const C=Symbol.for("drizzle:Name");class ue{static[i]="PgForeignKeyBuilder";reference;_onUpdate="no action";_onDelete="no action";constructor(e,t){this.reference=()=>{const{name:n,columns:o,foreignColumns:a}=e();return{name:n,columns:o,foreignTable:a[0].table,foreignColumns:a}},t&&(this._onUpdate=t.onUpdate,this._onDelete=t.onDelete)}onUpdate(e){return this._onUpdate=e===void 0?"no action":e,this}onDelete(e){return this._onDelete=e===void 0?"no action":e,this}build(e){return new le(e,this)}}class le{constructor(e,t){this.table=e,this.reference=t.reference,this.onUpdate=t._onUpdate,this.onDelete=t._onDelete}static[i]="PgForeignKey";reference;onUpdate;onDelete;getName(){const{name:e,columns:t,foreignColumns:n}=this.reference(),o=t.map(y=>y.name),a=n.map(y=>y.name),f=[this.table[C],...o,n[0].table[C],...a];return e??`${f.join("_")}_fk`}}function ce(r,...e){return r(...e)}function ge(r,e){return`${r[C]}_${e.join("_")}_unique`}function J(r,e,t){for(let n=e;n<r.length;n++){const o=r[n];if(o==="\\"){n++;continue}if(o==='"')return[r.slice(e,n).replace(/\\/g,""),n+1];if(!t&&(o===","||o==="}"))return[r.slice(e,n).replace(/\\/g,""),n]}return[r.slice(e).replace(/\\/g,""),r.length]}function Z(r,e=0){const t=[];let n=e,o=!1;for(;n<r.length;){const a=r[n];if(a===","){(o||n===e)&&t.push(""),o=!0,n++;continue}if(o=!1,a==="\\"){n+=2;continue}if(a==='"'){const[d,P]=J(r,n+1,!0);t.push(d),n=P;continue}if(a==="}")return[t,n+1];if(a==="{"){const[d,P]=Z(r,n+1);t.push(d),n=P;continue}const[f,y]=J(r,n,!1);t.push(f),n=y}return[t,n]}function de(r){const[e]=Z(r,1);return e}function k(r){return`{${r.map(e=>Array.isArray(e)?k(e):typeof e=="string"?`"${e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`:`${e}`).join(",")}}`}class l extends ae{foreignKeyConfigs=[];static[i]="PgColumnBuilder";array(e){return new pe(this.config.name,this,e)}references(e,t={}){return this.foreignKeyConfigs.push({ref:e,actions:t}),this}unique(e,t){return this.config.isUnique=!0,this.config.uniqueName=e,this.config.uniqueType=t?.nulls,this}generatedAlwaysAs(e){return this.config.generated={as:e,type:"always",mode:"stored"},this}buildForeignKeys(e,t){return this.foreignKeyConfigs.map(({ref:n,actions:o})=>ce((a,f)=>{const y=new ue(()=>{const d=a();return{columns:[e],foreignColumns:[d]}});return f.onUpdate&&y.onUpdate(f.onUpdate),f.onDelete&&y.onDelete(f.onDelete),y.build(t)},n,o))}buildExtraConfigColumn(e){return new me(e,this.config)}}class u extends E{constructor(e,t){t.uniqueName||(t.uniqueName=ge(e,[t.name])),super(e,t),this.table=e}static[i]="PgColumn"}class me extends u{static[i]="ExtraConfigColumn";getSQLType(){return this.getSQLType()}indexConfig={order:this.config.order??"asc",nulls:this.config.nulls??"last",opClass:this.config.opClass};defaultConfig={order:"asc",nulls:"last",opClass:void 0};asc(){return this.indexConfig.order="asc",this}desc(){return this.indexConfig.order="desc",this}nullsFirst(){return this.indexConfig.nulls="first",this}nullsLast(){return this.indexConfig.nulls="last",this}op(e){return this.indexConfig.opClass=e,this}}class pe extends l{static[i]="PgArrayBuilder";constructor(e,t,n){super(e,"array","PgArray"),this.config.baseBuilder=t,this.config.size=n}build(e){const t=this.config.baseBuilder.build(e);return new K(e,this.config,t)}}class K extends u{constructor(e,t,n,o){super(e,t),this.baseColumn=n,this.range=o,this.size=t.size}size;static[i]="PgArray";getSQLType(){return`${this.baseColumn.getSQLType()}[${typeof this.size=="number"?this.size:""}]`}mapFromDriverValue(e){return typeof e=="string"&&(e=de(e)),e.map(t=>this.baseColumn.mapFromDriverValue(t))}mapToDriverValue(e,t=!1){const n=e.map(o=>o===null?null:S(this.baseColumn,K)?this.baseColumn.mapToDriverValue(o,!0):this.baseColumn.mapToDriverValue(o));return t?n:k(n)}}const R=Symbol.for("drizzle:isPgEnum");function fe(r){return!!r&&typeof r=="function"&&R in r&&r[R]===!0}class ee{static[i]="Subquery";constructor(e,t,n,o=!1,a=[]){this._={brand:"Subquery",sql:e,selectedFields:t,alias:n,isWith:o,usedTables:a}}}const he={startActiveSpan(r,e){return e()}},V=Symbol.for("drizzle:ViewBaseConfig"),Q=Symbol.for("drizzle:Schema"),G=Symbol.for("drizzle:Columns"),M=Symbol.for("drizzle:ExtraConfigColumns"),A=Symbol.for("drizzle:OriginalName"),q=Symbol.for("drizzle:BaseName"),z=Symbol.for("drizzle:IsAlias"),H=Symbol.for("drizzle:ExtraConfigBuilder"),ye=Symbol.for("drizzle:IsDrizzleTable");class w{static[i]="Table";static Symbol={Name:C,Schema:Q,OriginalName:A,Columns:G,ExtraConfigColumns:M,BaseName:q,IsAlias:z,ExtraConfigBuilder:H};[C];[A];[Q];[G];[M];[q];[z]=!1;[ye]=!0;[H]=void 0;constructor(e,t,n){this[C]=this[A]=e,this[Q]=t,this[q]=n}}function Pe(r){return r!=null&&typeof r.getSQL=="function"}function be(r){const e={sql:"",params:[]};for(const t of r)e.sql+=t.sql,e.params.push(...t.params),t.typings?.length&&(e.typings||(e.typings=[]),e.typings.push(...t.typings));return e}class N{static[i]="StringChunk";value;constructor(e){this.value=Array.isArray(e)?e:[e]}getSQL(){return new h([this])}}class h{constructor(e){this.queryChunks=e;for(const t of e)if(S(t,w)){const n=t[w.Symbol.Schema];this.usedTables.push(n===void 0?t[w.Symbol.Name]:n+"."+t[w.Symbol.Name])}}static[i]="SQL";decoder=te;shouldInlineParams=!1;usedTables=[];append(e){return this.queryChunks.push(...e.queryChunks),this}toQuery(e){return he.startActiveSpan("drizzle.buildSQL",t=>{const n=this.buildQueryFromSourceParams(this.queryChunks,e);return t?.setAttributes({"drizzle.query.text":n.sql,"drizzle.query.params":JSON.stringify(n.params)}),n})}buildQueryFromSourceParams(e,t){const n=Object.assign({},t,{inlineParams:t.inlineParams||this.shouldInlineParams,paramStartIndex:t.paramStartIndex||{value:0}}),{casing:o,escapeName:a,escapeParam:f,prepareTyping:y,inlineParams:d,paramStartIndex:P}=n;return be(e.map(s=>{if(S(s,N))return{sql:s.value.join(""),params:[]};if(S(s,$))return{sql:a(s.value),params:[]};if(s===void 0)return{sql:"",params:[]};if(Array.isArray(s)){const g=[new N("(")];for(const[m,D]of s.entries())g.push(D),m<s.length-1&&g.push(new N(", "));return g.push(new N(")")),this.buildQueryFromSourceParams(g,n)}if(S(s,h))return this.buildQueryFromSourceParams(s.queryChunks,{...n,inlineParams:d||s.shouldInlineParams});if(S(s,w)){const g=s[w.Symbol.Schema],m=s[w.Symbol.Name];return{sql:g===void 0||s[z]?a(m):a(g)+"."+a(m),params:[]}}if(S(s,E)){const g=o.getColumnCasing(s);if(t.invokeSource==="indexes")return{sql:a(g),params:[]};const m=s.table[w.Symbol.Schema];return{sql:s.table[z]||m===void 0?a(s.table[w.Symbol.Name])+"."+a(g):a(m)+"."+a(s.table[w.Symbol.Name])+"."+a(g),params:[]}}if(S(s,Se)){const g=s[V].schema,m=s[V].name;return{sql:g===void 0||s[V].isAlias?a(m):a(g)+"."+a(m),params:[]}}if(S(s,ne)){if(S(s.value,O))return{sql:f(P.value++,s),params:[s],typings:["none"]};const g=s.value===null?null:s.encoder.mapToDriverValue(s.value);if(S(g,h))return this.buildQueryFromSourceParams([g],n);if(d)return{sql:this.mapInlineParam(g,n),params:[]};let m=["none"];return y&&(m=[y(s.encoder)]),{sql:f(P.value++,g),params:[g],typings:m}}return S(s,O)?{sql:f(P.value++,s),params:[s],typings:["none"]}:S(s,h.Aliased)&&s.fieldAlias!==void 0?{sql:a(s.fieldAlias),params:[]}:S(s,ee)?s._.isWith?{sql:a(s._.alias),params:[]}:this.buildQueryFromSourceParams([new N("("),s._.sql,new N(") "),new $(s._.alias)],n):fe(s)?s.schema?{sql:a(s.schema)+"."+a(s.enumName),params:[]}:{sql:a(s.enumName),params:[]}:Pe(s)?s.shouldOmitSQLParens?.()?this.buildQueryFromSourceParams([s.getSQL()],n):this.buildQueryFromSourceParams([new N("("),s.getSQL(),new N(")")],n):d?{sql:this.mapInlineParam(s,n),params:[]}:{sql:f(P.value++,s),params:[s],typings:["none"]}}))}mapInlineParam(e,{escapeString:t}){if(e===null)return"null";if(typeof e=="number"||typeof e=="boolean")return e.toString();if(typeof e=="string")return t(e);if(typeof e=="object"){const n=e.toString();return t(n==="[object Object]"?JSON.stringify(e):n)}throw new Error("Unexpected param value: "+e)}getSQL(){return this}as(e){return e===void 0?this:new h.Aliased(this,e)}mapWith(e){return this.decoder=typeof e=="function"?{mapFromDriverValue:e}:e,this}inlineParams(){return this.shouldInlineParams=!0,this}if(e){return e?this:void 0}}class ${constructor(e){this.value=e}static[i]="Name";brand;getSQL(){return new h([this])}}const te={mapFromDriverValue:r=>r},re={mapToDriverValue:r=>r};({...te,...re});class ne{constructor(e,t=re){this.value=e,this.encoder=t}static[i]="Param";brand;getSQL(){return new h([this])}}function v(r,...e){const t=[];(e.length>0||r.length>0&&r[0]!=="")&&t.push(new N(r[0]));for(const[n,o]of e.entries())t.push(o,new N(r[n+1]));return new h(t)}(r=>{function e(){return new h([])}r.empty=e;function t(d){return new h(d)}r.fromList=t;function n(d){return new h([new N(d)])}r.raw=n;function o(d,P){const s=[];for(const[g,m]of d.entries())g>0&&P!==void 0&&s.push(P),s.push(m);return new h(s)}r.join=o;function a(d){return new $(d)}r.identifier=a;function f(d){return new O(d)}r.placeholder=f;function y(d,P){return new ne(d,P)}r.param=y})(v||(v={}));(r=>{class e{constructor(n,o){this.sql=n,this.fieldAlias=o}static[i]="SQL.Aliased";isSelectionField=!1;getSQL(){return this.sql}clone(){return new e(this.sql,this.fieldAlias)}}r.Aliased=e})(h||(h={}));class O{constructor(e){this.name=e}static[i]="Placeholder";getSQL(){return new h([this])}}const we=Symbol.for("drizzle:IsDrizzleView");class Se{static[i]="View";[V];[we]=!0;constructor({name:e,schema:t,selectedFields:n,query:o}){this[V]={name:e,originalName:e,schema:t,selectedFields:n,query:o,isExisting:!o,isAlias:!1}}getSQL(){return new h([this])}}E.prototype.getSQL=function(){return new h([this])};w.prototype.getSQL=function(){return new h([this])};ee.prototype.getSQL=function(){return new h([this])};function b(r,e){return{name:typeof r=="string"&&r.length>0?r:"",config:typeof r=="object"?r:e}}typeof TextDecoder>"u"||new TextDecoder;class _ extends l{static[i]="PgIntColumnBaseBuilder";generatedAlwaysAsIdentity(e){if(e){const{name:t,...n}=e;this.config.generatedIdentity={type:"always",sequenceName:t,sequenceOptions:n}}else this.config.generatedIdentity={type:"always"};return this.config.hasDefault=!0,this.config.notNull=!0,this}generatedByDefaultAsIdentity(e){if(e){const{name:t,...n}=e;this.config.generatedIdentity={type:"byDefault",sequenceName:t,sequenceOptions:n}}else this.config.generatedIdentity={type:"byDefault"};return this.config.hasDefault=!0,this.config.notNull=!0,this}}class Te extends _{static[i]="PgBigInt53Builder";constructor(e){super(e,"number","PgBigInt53")}build(e){return new Ne(e,this.config)}}class Ne extends u{static[i]="PgBigInt53";getSQLType(){return"bigint"}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}}class Be extends _{static[i]="PgBigInt64Builder";constructor(e){super(e,"bigint","PgBigInt64")}build(e){return new xe(e,this.config)}}class xe extends u{static[i]="PgBigInt64";getSQLType(){return"bigint"}mapFromDriverValue(e){return BigInt(e)}}function ie(r,e){const{name:t,config:n}=b(r,e);return n.mode==="number"?new Te(t):new Be(t)}class De extends l{static[i]="PgBigSerial53Builder";constructor(e){super(e,"number","PgBigSerial53"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new Ce(e,this.config)}}class Ce extends u{static[i]="PgBigSerial53";getSQLType(){return"bigserial"}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}}class ve extends l{static[i]="PgBigSerial64Builder";constructor(e){super(e,"bigint","PgBigSerial64"),this.config.hasDefault=!0}build(e){return new Ve(e,this.config)}}class Ve extends u{static[i]="PgBigSerial64";getSQLType(){return"bigserial"}mapFromDriverValue(e){return BigInt(e)}}function Ie(r,e){const{name:t,config:n}=b(r,e);return n.mode==="number"?new De(t):new ve(t)}class Fe extends l{static[i]="PgBooleanBuilder";constructor(e){super(e,"boolean","PgBoolean")}build(e){return new ze(e,this.config)}}class ze extends u{static[i]="PgBoolean";getSQLType(){return"boolean"}}function T(r){return new Fe(r??"")}class Le extends l{static[i]="PgCharBuilder";constructor(e,t){super(e,"string","PgChar"),this.config.length=t.length,this.config.enumValues=t.enum}build(e){return new _e(e,this.config)}}class _e extends u{static[i]="PgChar";length=this.config.length;enumValues=this.config.enumValues;getSQLType(){return this.length===void 0?"char":`char(${this.length})`}}function Qe(r,e={}){const{name:t,config:n}=b(r,e);return new Le(t,n)}class Ae extends l{static[i]="PgCidrBuilder";constructor(e){super(e,"string","PgCidr")}build(e){return new qe(e,this.config)}}class qe extends u{static[i]="PgCidr";getSQLType(){return"cidr"}}function $e(r){return new Ae(r??"")}class Oe extends l{static[i]="PgCustomColumnBuilder";constructor(e,t,n){super(e,"custom","PgCustomColumn"),this.config.fieldConfig=t,this.config.customTypeParams=n}build(e){return new Ue(e,this.config)}}class Ue extends u{static[i]="PgCustomColumn";sqlName;mapTo;mapFrom;constructor(e,t){super(e,t),this.sqlName=t.customTypeParams.dataType(t.fieldConfig),this.mapTo=t.customTypeParams.toDriver,this.mapFrom=t.customTypeParams.fromDriver}getSQLType(){return this.sqlName}mapFromDriverValue(e){return typeof this.mapFrom=="function"?this.mapFrom(e):e}mapToDriverValue(e){return typeof this.mapTo=="function"?this.mapTo(e):e}}function je(r){return(e,t)=>{const{name:n,config:o}=b(e,t);return new Oe(n,o,r)}}class I extends l{static[i]="PgDateColumnBaseBuilder";defaultNow(){return this.default(v`now()`)}}class Ee extends I{static[i]="PgDateBuilder";constructor(e){super(e,"date","PgDate")}build(e){return new Ke(e,this.config)}}class Ke extends u{static[i]="PgDate";getSQLType(){return"date"}mapFromDriverValue(e){return new Date(e)}mapToDriverValue(e){return e.toISOString()}}class Je extends I{static[i]="PgDateStringBuilder";constructor(e){super(e,"string","PgDateString")}build(e){return new Re(e,this.config)}}class Re extends u{static[i]="PgDateString";getSQLType(){return"date"}}function L(r,e){const{name:t,config:n}=b(r,e);return n?.mode==="date"?new Ee(t):new Je(t)}class Ge extends l{static[i]="PgDoublePrecisionBuilder";constructor(e){super(e,"number","PgDoublePrecision")}build(e){return new Me(e,this.config)}}class Me extends u{static[i]="PgDoublePrecision";getSQLType(){return"double precision"}mapFromDriverValue(e){return typeof e=="string"?Number.parseFloat(e):e}}function He(r){return new Ge(r??"")}class We extends l{static[i]="PgInetBuilder";constructor(e){super(e,"string","PgInet")}build(e){return new Xe(e,this.config)}}class Xe extends u{static[i]="PgInet";getSQLType(){return"inet"}}function Ye(r){return new We(r??"")}class Ze extends _{static[i]="PgIntegerBuilder";constructor(e){super(e,"number","PgInteger")}build(e){return new ke(e,this.config)}}class ke extends u{static[i]="PgInteger";getSQLType(){return"integer"}mapFromDriverValue(e){return typeof e=="string"?Number.parseInt(e):e}}function p(r){return new Ze(r??"")}class et extends l{static[i]="PgIntervalBuilder";constructor(e,t){super(e,"string","PgInterval"),this.config.intervalConfig=t}build(e){return new tt(e,this.config)}}class tt extends u{static[i]="PgInterval";fields=this.config.intervalConfig.fields;precision=this.config.intervalConfig.precision;getSQLType(){const e=this.fields?` ${this.fields}`:"",t=this.precision?`(${this.precision})`:"";return`interval${e}${t}`}}function rt(r,e={}){const{name:t,config:n}=b(r,e);return new et(t,n)}class nt extends l{static[i]="PgJsonBuilder";constructor(e){super(e,"json","PgJson")}build(e){return new it(e,this.config)}}class it extends u{static[i]="PgJson";constructor(e,t){super(e,t)}getSQLType(){return"json"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e}}function st(r){return new nt(r??"")}class ot extends l{static[i]="PgJsonbBuilder";constructor(e){super(e,"json","PgJsonb")}build(e){return new at(e,this.config)}}class at extends u{static[i]="PgJsonb";constructor(e,t){super(e,t)}getSQLType(){return"jsonb"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e}}function ut(r){return new ot(r??"")}class lt extends l{static[i]="PgLineBuilder";constructor(e){super(e,"array","PgLine")}build(e){return new ct(e,this.config)}}class ct extends u{static[i]="PgLine";getSQLType(){return"line"}mapFromDriverValue(e){const[t,n,o]=e.slice(1,-1).split(",");return[Number.parseFloat(t),Number.parseFloat(n),Number.parseFloat(o)]}mapToDriverValue(e){return`{${e[0]},${e[1]},${e[2]}}`}}class gt extends l{static[i]="PgLineABCBuilder";constructor(e){super(e,"json","PgLineABC")}build(e){return new dt(e,this.config)}}class dt extends u{static[i]="PgLineABC";getSQLType(){return"line"}mapFromDriverValue(e){const[t,n,o]=e.slice(1,-1).split(",");return{a:Number.parseFloat(t),b:Number.parseFloat(n),c:Number.parseFloat(o)}}mapToDriverValue(e){return`{${e.a},${e.b},${e.c}}`}}function mt(r,e){const{name:t,config:n}=b(r,e);return!n?.mode||n.mode==="tuple"?new lt(t):new gt(t)}class pt extends l{static[i]="PgMacaddrBuilder";constructor(e){super(e,"string","PgMacaddr")}build(e){return new ft(e,this.config)}}class ft extends u{static[i]="PgMacaddr";getSQLType(){return"macaddr"}}function ht(r){return new pt(r??"")}class yt extends l{static[i]="PgMacaddr8Builder";constructor(e){super(e,"string","PgMacaddr8")}build(e){return new Pt(e,this.config)}}class Pt extends u{static[i]="PgMacaddr8";getSQLType(){return"macaddr8"}}function bt(r){return new yt(r??"")}class wt extends l{static[i]="PgNumericBuilder";constructor(e,t,n){super(e,"string","PgNumeric"),this.config.precision=t,this.config.scale=n}build(e){return new St(e,this.config)}}class St extends u{static[i]="PgNumeric";precision;scale;constructor(e,t){super(e,t),this.precision=t.precision,this.scale=t.scale}mapFromDriverValue(e){return typeof e=="string"?e:String(e)}getSQLType(){return this.precision!==void 0&&this.scale!==void 0?`numeric(${this.precision}, ${this.scale})`:this.precision===void 0?"numeric":`numeric(${this.precision})`}}class Tt extends l{static[i]="PgNumericNumberBuilder";constructor(e,t,n){super(e,"number","PgNumericNumber"),this.config.precision=t,this.config.scale=n}build(e){return new Nt(e,this.config)}}class Nt extends u{static[i]="PgNumericNumber";precision;scale;constructor(e,t){super(e,t),this.precision=t.precision,this.scale=t.scale}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}mapToDriverValue=String;getSQLType(){return this.precision!==void 0&&this.scale!==void 0?`numeric(${this.precision}, ${this.scale})`:this.precision===void 0?"numeric":`numeric(${this.precision})`}}class Bt extends l{static[i]="PgNumericBigIntBuilder";constructor(e,t,n){super(e,"bigint","PgNumericBigInt"),this.config.precision=t,this.config.scale=n}build(e){return new xt(e,this.config)}}class xt extends u{static[i]="PgNumericBigInt";precision;scale;constructor(e,t){super(e,t),this.precision=t.precision,this.scale=t.scale}mapFromDriverValue=BigInt;mapToDriverValue=String;getSQLType(){return this.precision!==void 0&&this.scale!==void 0?`numeric(${this.precision}, ${this.scale})`:this.precision===void 0?"numeric":`numeric(${this.precision})`}}function B(r,e){const{name:t,config:n}=b(r,e),o=n?.mode;return o==="number"?new Tt(t,n?.precision,n?.scale):o==="bigint"?new Bt(t,n?.precision,n?.scale):new wt(t,n?.precision,n?.scale)}class Dt extends l{static[i]="PgPointTupleBuilder";constructor(e){super(e,"array","PgPointTuple")}build(e){return new Ct(e,this.config)}}class Ct extends u{static[i]="PgPointTuple";getSQLType(){return"point"}mapFromDriverValue(e){if(typeof e=="string"){const[t,n]=e.slice(1,-1).split(",");return[Number.parseFloat(t),Number.parseFloat(n)]}return[e.x,e.y]}mapToDriverValue(e){return`(${e[0]},${e[1]})`}}class vt extends l{static[i]="PgPointObjectBuilder";constructor(e){super(e,"json","PgPointObject")}build(e){return new Vt(e,this.config)}}class Vt extends u{static[i]="PgPointObject";getSQLType(){return"point"}mapFromDriverValue(e){if(typeof e=="string"){const[t,n]=e.slice(1,-1).split(",");return{x:Number.parseFloat(t),y:Number.parseFloat(n)}}return e}mapToDriverValue(e){return`(${e.x},${e.y})`}}function It(r,e){const{name:t,config:n}=b(r,e);return!n?.mode||n.mode==="tuple"?new Dt(t):new vt(t)}function Ft(r){const e=[];for(let t=0;t<r.length;t+=2)e.push(Number.parseInt(r.slice(t,t+2),16));return new Uint8Array(e)}function W(r,e){const t=new ArrayBuffer(8),n=new DataView(t);for(let o=0;o<8;o++)n.setUint8(o,r[e+o]);return n.getFloat64(0,!0)}function se(r){const e=Ft(r);let t=0;const n=e[t];t+=1;const o=new DataView(e.buffer),a=o.getUint32(t,n===1);if(t+=4,a&536870912&&(o.getUint32(t,n===1),t+=4),(a&65535)===1){const f=W(e,t);t+=8;const y=W(e,t);return t+=8,[f,y]}throw new Error("Unsupported geometry type")}class zt extends l{static[i]="PgGeometryBuilder";constructor(e){super(e,"array","PgGeometry")}build(e){return new Lt(e,this.config)}}class Lt extends u{static[i]="PgGeometry";getSQLType(){return"geometry(point)"}mapFromDriverValue(e){return se(e)}mapToDriverValue(e){return`point(${e[0]} ${e[1]})`}}class _t extends l{static[i]="PgGeometryObjectBuilder";constructor(e){super(e,"json","PgGeometryObject")}build(e){return new Qt(e,this.config)}}class Qt extends u{static[i]="PgGeometryObject";getSQLType(){return"geometry(point)"}mapFromDriverValue(e){const t=se(e);return{x:t[0],y:t[1]}}mapToDriverValue(e){return`point(${e.x} ${e.y})`}}function At(r,e){const{name:t,config:n}=b(r,e);return!n?.mode||n.mode==="tuple"?new zt(t):new _t(t)}class qt extends l{static[i]="PgRealBuilder";constructor(e,t){super(e,"number","PgReal"),this.config.length=t}build(e){return new $t(e,this.config)}}class $t extends u{static[i]="PgReal";constructor(e,t){super(e,t)}getSQLType(){return"real"}mapFromDriverValue=e=>typeof e=="string"?Number.parseFloat(e):e}function Ot(r){return new qt(r??"")}class Ut extends l{static[i]="PgSerialBuilder";constructor(e){super(e,"number","PgSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new jt(e,this.config)}}class jt extends u{static[i]="PgSerial";getSQLType(){return"serial"}}function Et(r){return new Ut(r??"")}class Kt extends _{static[i]="PgSmallIntBuilder";constructor(e){super(e,"number","PgSmallInt")}build(e){return new Jt(e,this.config)}}class Jt extends u{static[i]="PgSmallInt";getSQLType(){return"smallint"}mapFromDriverValue=e=>typeof e=="string"?Number(e):e}function Rt(r){return new Kt(r??"")}class Gt extends l{static[i]="PgSmallSerialBuilder";constructor(e){super(e,"number","PgSmallSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new Mt(e,this.config)}}class Mt extends u{static[i]="PgSmallSerial";getSQLType(){return"smallserial"}}function Ht(r){return new Gt(r??"")}class Wt extends l{static[i]="PgTextBuilder";constructor(e,t){super(e,"string","PgText"),this.config.enumValues=t.enum}build(e){return new Xt(e,this.config)}}class Xt extends u{static[i]="PgText";enumValues=this.config.enumValues;getSQLType(){return"text"}}function Yt(r,e={}){const{name:t,config:n}=b(r,e);return new Wt(t,n)}class Zt extends I{constructor(e,t,n){super(e,"string","PgTime"),this.withTimezone=t,this.precision=n,this.config.withTimezone=t,this.config.precision=n}static[i]="PgTimeBuilder";build(e){return new kt(e,this.config)}}class kt extends u{static[i]="PgTime";withTimezone;precision;constructor(e,t){super(e,t),this.withTimezone=t.withTimezone,this.precision=t.precision}getSQLType(){return`time${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}function er(r,e={}){const{name:t,config:n}=b(r,e);return new Zt(t,n.withTimezone??!1,n.precision)}class tr extends I{static[i]="PgTimestampBuilder";constructor(e,t,n){super(e,"date","PgTimestamp"),this.config.withTimezone=t,this.config.precision=n}build(e){return new rr(e,this.config)}}class rr extends u{static[i]="PgTimestamp";withTimezone;precision;constructor(e,t){super(e,t),this.withTimezone=t.withTimezone,this.precision=t.precision}getSQLType(){return`timestamp${this.precision===void 0?"":` (${this.precision})`}${this.withTimezone?" with time zone":""}`}mapFromDriverValue=e=>new Date(this.withTimezone?e:e+"+0000");mapToDriverValue=e=>e.toISOString()}class nr extends I{static[i]="PgTimestampStringBuilder";constructor(e,t,n){super(e,"string","PgTimestampString"),this.config.withTimezone=t,this.config.precision=n}build(e){return new ir(e,this.config)}}class ir extends u{static[i]="PgTimestampString";withTimezone;precision;constructor(e,t){super(e,t),this.withTimezone=t.withTimezone,this.precision=t.precision}getSQLType(){return`timestamp${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}function F(r,e={}){const{name:t,config:n}=b(r,e);return n?.mode==="string"?new nr(t,n.withTimezone??!1,n.precision):new tr(t,n?.withTimezone??!1,n?.precision)}class sr extends l{static[i]="PgUUIDBuilder";constructor(e){super(e,"string","PgUUID")}defaultRandom(){return this.default(v`gen_random_uuid()`)}build(e){return new or(e,this.config)}}class or extends u{static[i]="PgUUID";getSQLType(){return"uuid"}}function ar(r){return new sr(r??"")}class ur extends l{static[i]="PgVarcharBuilder";constructor(e,t){super(e,"string","PgVarchar"),this.config.length=t.length,this.config.enumValues=t.enum}build(e){return new lr(e,this.config)}}class lr extends u{static[i]="PgVarchar";length=this.config.length;enumValues=this.config.enumValues;getSQLType(){return this.length===void 0?"varchar":`varchar(${this.length})`}}function c(r,e={}){const{name:t,config:n}=b(r,e);return new ur(t,n)}class cr extends l{static[i]="PgBinaryVectorBuilder";constructor(e,t){super(e,"string","PgBinaryVector"),this.config.dimensions=t.dimensions}build(e){return new gr(e,this.config)}}class gr extends u{static[i]="PgBinaryVector";dimensions=this.config.dimensions;getSQLType(){return`bit(${this.dimensions})`}}function dr(r,e){const{name:t,config:n}=b(r,e);return new cr(t,n)}class mr extends l{static[i]="PgHalfVectorBuilder";constructor(e,t){super(e,"array","PgHalfVector"),this.config.dimensions=t.dimensions}build(e){return new pr(e,this.config)}}class pr extends u{static[i]="PgHalfVector";dimensions=this.config.dimensions;getSQLType(){return`halfvec(${this.dimensions})`}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){return e.slice(1,-1).split(",").map(t=>Number.parseFloat(t))}}function fr(r,e){const{name:t,config:n}=b(r,e);return new mr(t,n)}class hr extends l{static[i]="PgSparseVectorBuilder";constructor(e,t){super(e,"string","PgSparseVector"),this.config.dimensions=t.dimensions}build(e){return new yr(e,this.config)}}class yr extends u{static[i]="PgSparseVector";dimensions=this.config.dimensions;getSQLType(){return`sparsevec(${this.dimensions})`}}function Pr(r,e){const{name:t,config:n}=b(r,e);return new hr(t,n)}class br extends l{static[i]="PgVectorBuilder";constructor(e,t){super(e,"array","PgVector"),this.config.dimensions=t.dimensions}build(e){return new wr(e,this.config)}}class wr extends u{static[i]="PgVector";dimensions=this.config.dimensions;getSQLType(){return`vector(${this.dimensions})`}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){return e.slice(1,-1).split(",").map(t=>Number.parseFloat(t))}}function Sr(r,e){const{name:t,config:n}=b(r,e);return new br(t,n)}function Tr(){return{bigint:ie,bigserial:Ie,boolean:T,char:Qe,cidr:$e,customType:je,date:L,doublePrecision:He,inet:Ye,integer:p,interval:rt,json:st,jsonb:ut,line:mt,macaddr:ht,macaddr8:bt,numeric:B,point:It,geometry:At,real:Ot,serial:Et,smallint:Rt,smallserial:Ht,text:Yt,time:er,timestamp:F,uuid:ar,varchar:c,bit:dr,halfvec:fr,sparsevec:Pr,vector:Sr}}const U=Symbol.for("drizzle:PgInlineForeignKeys"),X=Symbol.for("drizzle:EnableRLS");class Y extends w{static[i]="PgTable";static Symbol=Object.assign({},w.Symbol,{InlineForeignKeys:U,EnableRLS:X});[U]=[];[X]=!1;[w.Symbol.ExtraConfigBuilder]=void 0;[w.Symbol.ExtraConfigColumns]={}}function Nr(r,e,t,n,o=r){const a=new Y(r,n,o),f=typeof e=="function"?e(Tr()):e,y=Object.fromEntries(Object.entries(f).map(([s,g])=>{const m=g;m.setName(s);const D=m.build(a);return a[U].push(...m.buildForeignKeys(D,a)),[s,D]})),d=Object.fromEntries(Object.entries(f).map(([s,g])=>{const m=g;m.setName(s);const D=m.buildExtraConfigColumn(a);return[s,D]})),P=Object.assign(a,y);return P[w.Symbol.Columns]=y,P[w.Symbol.ExtraConfigColumns]=d,Object.assign(P,{enableRLS:()=>(P[Y.Symbol.EnableRLS]=!0,P)})}const x=(r,e,t)=>Nr(r,e,t,void 0),oe=x("client",{client_id:p().primaryKey().generatedAlwaysAsIdentity(),name:c({length:255}).notNull(),email:c({length:255}),phone_number:c({length:16}),id_number:ie({mode:"number"}).notNull().unique(),birth_date:L(),debt:p().default(0),is_deleted:T().default(!1)}),Br=x("technician",{technician_id:p().primaryKey().generatedAlwaysAsIdentity(),name:c({length:255}).notNull(),email:c({length:255}),phone_number:c({length:16}),speciality:c({length:255}).notNull(),state:c({length:100}).notNull(),is_deleted:T().default(!1)}),xr=x("provider",{provider_id:p().primaryKey().generatedAlwaysAsIdentity(),name:c({length:255}).notNull(),phone_number:c({length:255}).notNull(),email:c({length:255}),address:c("address",{length:255}).notNull(),is_deleted:T().default(!1)});x("expense",{expense_id:p().primaryKey().generatedAlwaysAsIdentity(),datetime:F().notNull().defaultNow(),category:c({length:255}).notNull(),description:c({length:255}),amount:B({precision:12,scale:2}).notNull(),payment_method:c({length:50}).notNull(),receipt_path:c({length:255}),receipt_original_name:c({length:255}),receipt_mime:c({length:100}),receipt_size:p(),provider_id:p().references(()=>xr.provider_id),is_deleted:T().default(!1)});const j=x("phone",{device_id:p().primaryKey().generatedAlwaysAsIdentity(),datetime:F().notNull().defaultNow(),name:c({length:255}).notNull(),brand:c({length:100}).notNull(),imei:c({length:100}).unique().notNull(),device_type:c({length:100}).notNull(),battery_health:p(),storage_capacity:p(),color:c({length:50}),category:c({length:100}).notNull(),price:B({precision:12,scale:2}).notNull(),buy_cost:B({precision:12,scale:2}).notNull(),deposit:c({length:255}).notNull(),sold:T().default(!1).notNull(),trade_in:T().default(!1),is_deleted:T().default(!1)});x("repair",{repair_id:p().primaryKey().generatedAlwaysAsIdentity(),datetime:F().notNull().defaultNow(),repair_state:c({length:100}).notNull(),priority:c({length:50}).notNull(),description:c({length:255}).notNull(),diagnostic:c({length:255}),client_cost:B({precision:12,scale:2}).notNull(),internal_cost:B({precision:12,scale:2}).notNull(),client_id:p().references(()=>oe.client_id).notNull(),technician_id:p().references(()=>Br.technician_id).notNull(),device_id:p().references(()=>j.device_id).notNull(),is_deleted:T().default(!1)});x("sale",{sale_id:p().primaryKey().generatedAlwaysAsIdentity(),datetime:F().notNull().defaultNow(),total_amount:B({precision:12,scale:2}).notNull(),payment_method:c({length:50}).notNull(),debt:T().default(!1).notNull(),debt_amount:B({precision:12,scale:2}),client_id:p().references(()=>oe.client_id).notNull(),seller_id:p().references(()=>Dr.seller_id).notNull(),device_id:p().references(()=>j.device_id).notNull(),is_deleted:T().default(!1),trade_in_device:p().references(()=>j.device_id)});const Dr=x("seller",{seller_id:p().primaryKey().generatedAlwaysAsIdentity(),name:c({length:255}).notNull(),age:p().notNull(),email:c({length:255}),phone_number:c({length:16}),hire_date:L().notNull().default(v`CURRENT_DATE`),pay_date:L().default(v`CURRENT_DATE`),commission:B({precision:5,scale:2}).default("0.00"),is_deleted:T().default(!1)});
