---
import "@/styles/tailwind.css";
import LayoutProfile from "@/layouts/LayoutProfile.astro";
import { requireAuth } from "@/lib/requireAuth";
import ProfileEditor from "@/components/ProfileEditor";

const auth = await requireAuth(Astro);
if (!auth) return Astro.redirect("/login");

const { user, tenant, roleInTenant, tenantSettings, userSettings } = auth.auth;
---

<LayoutProfile title="Zuma+ - Perfil" topic="ConfiguraciÃ³n">
  <Fragment slot="content">
    <ProfileEditor
      initial={{
        user,
        userSettings,
        tenant,
        tenantSettings,
        roleInTenant,
      }}
      client:load
    />
  </Fragment>
</LayoutProfile>
